// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BLOCKCHAIN.IFA - Simple Blockchain Implementation
// Demonstrates hashing, data structures, and verification
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Run: ifa run examples/05_advanced/blockchain.ifa
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã¬bÃ  Irosu;    // Output
Ã¬bÃ  Irete;    // Crypto/Hashing
Ã¬bÃ  Ogunda;   // Arrays
Ã¬bÃ  Iwori;    // Time
Ã¬bÃ  Ika;      // Strings

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BLOCK CLASS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

odÃ¹ Block {
    ayanmá» index = 0;
    ayanmá» timestamp = "";
    ayanmá» data = "";
    ayanmá» previous_hash = "";
    ayanmá» hash = "";
    ayanmá» nonce = 0;
    
    ese dÃ¡(idx, data, prev_hash) {
        index = idx;
        timestamp = Iwori.ago();
        this.data = data;
        previous_hash = prev_hash;
        hash = calculate_hash();
    }
    
    ese calculate_hash() {
        ayanmá» content = Ika.so(index, timestamp, data, previous_hash, nonce);
        padÃ  Irete.sha256(content);
    }
    
    ese mine(difficulty) {
        ayanmá» target = Ika.repeat("0", difficulty);
        
        nigba Ika.ge(hash, 0, difficulty) != target {
            nonce = nonce + 1;
            hash = calculate_hash();
        }
        
        Irosu.fo("â›ï¸  Block mined: " + Ika.ge(hash, 0, 16) + "...");
    }
    
    ese to_string() {
        padÃ  Ika.so(
            "Block #", index, "\n",
            "  Timestamp: ", timestamp, "\n",
            "  Data: ", data, "\n",
            "  Hash: ", hash, "\n",
            "  Previous: ", previous_hash
        );
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BLOCKCHAIN CLASS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

odÃ¹ Blockchain {
    ayanmá» chain = [];
    ayanmá» difficulty = 2;
    
    ese dÃ¡() {
        // Create genesis block
        ayanmá» genesis = Block.dÃ¡(0, "Genesis Block", "0");
        chain = Ogunda.fi(chain, genesis);
        Irosu.fo("ğŸŒ Genesis block created");
    }
    
    ese get_latest_block() {
        ayanmá» len = Ogunda.gigun(chain);
        padÃ  chain[len - 1];
    }
    
    ese add_block(data) {
        ayanmá» latest = get_latest_block();
        ayanmá» new_index = latest.index + 1;
        ayanmá» new_block = Block.dÃ¡(new_index, data, latest.hash);
        
        Irosu.fo("â›ï¸  Mining block #" + new_index + "...");
        new_block.mine(difficulty);
        
        chain = Ogunda.fi(chain, new_block);
        Irosu.fo("âœ… Block added to chain");
    }
    
    ese is_valid() {
        ayanmá» i = 1;
        ayanmá» len = Ogunda.gigun(chain);
        
        nigba i < len {
            ayanmá» current = chain[i];
            ayanmá» previous = chain[i - 1];
            
            // Check hash integrity
            ti current.hash != current.calculate_hash() {
                Irosu.fo("âŒ Invalid hash at block #" + i);
                padÃ  iro;
            }
            
            // Check chain link
            ti current.previous_hash != previous.hash {
                Irosu.fo("âŒ Invalid chain link at block #" + i);
                padÃ  iro;
            }
            
            i = i + 1;
        }
        
        Irosu.fo("âœ… Blockchain is valid");
        padÃ  otito;
    }
    
    ese print_chain() {
        Irosu.fo("\nâ•â•â• BLOCKCHAIN â•â•â•");
        fun block ninu chain {
            Irosu.fo(block.to_string());
            Irosu.fo("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
        }
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MAIN PROGRAM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Irosu.fo("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
Irosu.fo("â•‘        IfÃ¡-Lang Blockchain Demo                          â•‘");
Irosu.fo("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");

// Create blockchain
ayanmá» bc = Blockchain.dÃ¡();

// Add some blocks
bc.add_block("Transaction: Alice -> Bob: 50 IFA");
bc.add_block("Transaction: Bob -> Charlie: 25 IFA");
bc.add_block("Transaction: Charlie -> Alice: 10 IFA");

// Validate chain
bc.is_valid();

// Print chain
bc.print_chain();

Irosu.fo("\nğŸ‰ Blockchain demo complete!");
Ã á¹£áº¹;
