<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babalawo Linter - Ifá-Lang</title>
    <style>
        :root {
            --bg-dark: #0f0f1a;
            --bg-card: #1a1a2e;
            --accent: #e94560;
            --gold: #ffd700;
            --text: #eaeaea;
            --text-dim: #a0a0a0;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.7;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            padding: 3rem 0;
            border-bottom: 2px solid var(--accent);
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--gold), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h2 {
            color: var(--gold);
            margin: 2.5rem 0 1rem;
            border-bottom: 1px solid var(--accent);
            padding-bottom: 0.5rem;
        }

        h3 {
            color: var(--accent);
            margin: 1.5rem 0 0.5rem;
        }

        p {
            margin: 1rem 0;
        }

        pre {
            background: #0d1321;
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            color: var(--gold);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th,
        td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--bg-card);
        }

        th {
            color: var(--gold);
        }

        .api-card {
            background: var(--bg-card);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 3px solid var(--accent);
        }

        .api-card h4 {
            color: var(--gold);
            margin: 0 0 0.5rem;
        }

        a {
            color: var(--gold);
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-dim);
            border-top: 1px solid var(--accent);
            margin-top: 3rem;
        }
    </style>
</head>


<!-- Breadcrumbs -->
<div class="breadcrumbs">
    <div class="breadcrumbs-container">
        <ul class="breadcrumb-list">
            <!-- Breadcrumbs will be generated by JavaScript -->
        </ul>
    </div>
</div>
<div class="container">
    <header>
        <h1>?? Babalawo</h1>
        <p style="color: var(--text-dim);">Static Analysis & Linting for Ifá-Lang</p>
    </header>

    <p>The <strong>Babalawo</strong> (Yoruba: "Father of Secrets") is Ifá-Lang's compile-time analyzer. It checks
        your code for errors, style issues, and potential bugs before runtime, providing wisdom-based suggestions
        drawn from Ifá divination traditions.</p>

    <h2>Quick Start</h2>
    <pre><code># Run linter on a file
ifa check main.ifa

# Run with all warnings enabled
ifa check --strict main.ifa

# Check entire project
ifa check .</code></pre>

    <h2>Core Components</h2>

    <h3>BabalawoConfig</h3>
    <p>Configuration for the linter. Controls which checks are enabled.</p>
    <div class="api-card">
        <h4><code>BabalawoConfig</code></h4>
        <pre><code>// Default configuration
ayanmo config = BabalawoConfig.default();

// Custom configuration
ayanmo config = BabalawoConfig {
    check_unused: otito,      // Check unused variables
    check_taboos: otito,      // Check forbidden patterns
    check_resources: otito,   // Check resource lifecycle
    strict_mode: iro          // Treat warnings as errors
};</code></pre>
    </div>

    <h3>check_program()</h3>
    <p>Main entry point for analyzing an AST.</p>
    <div class="api-card">
        <h4><code>check_program(program, filename) ? Babalawo</code></h4>
        <pre><code>// Returns a Babalawo instance with all diagnostics
ayanmo baba = check_program(ast, "main.ifa");

// Access diagnostics
fun diag ninu baba.diagnostics {
    Irosu.fo(diag.severity + ": " + diag.message);
}</code></pre>
    </div>

    <h2>Checks & Rules</h2>

    <table>
        <tr>
            <th>Rule</th>
            <th>Description</th>
            <th>Severity</th>
        </tr>
        <tr>
            <td><code>undefined-variable</code></td>
            <td>Using a variable before declaration</td>
            <td>Error</td>
        </tr>
        <tr>
            <td><code>unused-variable</code></td>
            <td>Declared but never used</td>
            <td>Warning</td>
        </tr>
        <tr>
            <td><code>missing-return</code></td>
            <td>Function should return but doesn't</td>
            <td>Warning</td>
        </tr>
        <tr>
            <td><code>unclosed-resource</code></td>
            <td>Resource opened but not closed (?b? violation)</td>
            <td>Error</td>
        </tr>
        <tr>
            <td><code>taboo-violation</code></td>
            <td>Forbidden dependency between modules</td>
            <td>Error</td>
        </tr>
        <tr>
            <td><code>unreachable-code</code></td>
            <td>Code after return/exit</td>
            <td>Warning</td>
        </tr>
    </table>

    <h2>Taboo System (Èèw?`)</h2>
    <p>Define forbidden patterns to enforce architectural boundaries:</p>
    <pre><code>// In your .ifa config or code header:
èèw?` "ui" ? "database"      // UI cannot import database directly
èèw?` "model" ? "controller" // Models cannot depend on controllers

// Babalawo will error if these patterns are violated</code></pre>

    <h3>TabooEnforcer</h3>
    <div class="api-card">
        <h4><code>TabooEnforcer</code></h4>
        <p>Tracks and enforces forbidden dependency patterns.</p>
        <pre><code>ayanmo enforcer = TabooEnforcer.new();
enforcer.add_taboo("source_module", "target_module");

// Check for violations
ayanmo violations = enforcer.check(dependencies);
fun v ninu violations {
    Irosu.kigbe("Taboo: " + v.source + " ? " + v.target);
}</code></pre>
    </div>

    <h2>Ìwà Engine (Resource Lifecycle)</h2>
    <p>Tracks resource acquisition and release to prevent leaks:</p>
    <pre><code>// IwaEngine monitors:
// - File handles (Odi.open)
// - Network connections (Otura.connect)
// - Database connections (OduStore.open)
// - GPU resources (GpuContext buffers)

// Babalawo warns if resources are:
// 1. Opened but never closed
// 2. Closed but never opened
// 3. Used after close</code></pre>

    <h2>Odù Wisdom</h2>
    <p>Babalawo maps error types to the 16 Odù domains, providing culturally-rooted error messages:</p>

    <table>
        <tr>
            <th>Error Type</th>
            <th>Odù</th>
            <th>Proverb</th>
        </tr>
        <tr>
            <td>Uninitialized variable</td>
            <td>Ogbè (The Light)</td>
            <td>"A journey of a thousand miles begins with a single step."</td>
        </tr>
        <tr>
            <td>Missing termination</td>
            <td>Oyeku (The Seal)</td>
            <td>"Even the longest night ends with dawn."</td>
        </tr>
        <tr>
            <td>Index out of bounds</td>
            <td>Ogunda (The Cutter)</td>
            <td>"The machete cuts the path."</td>
        </tr>
        <tr>
            <td>Type error</td>
            <td>Ofun (The Creator)</td>
            <td>"The child inherits from the parent."</td>
        </tr>
    </table>

    <h2>Editor Integration</h2>

    <h3>VS Code</h3>
    <pre><code>// Install the Ifá-Lang extension
// Babalawo runs automatically on save

// .vscode/settings.json
{
    "ifa.linter.enabled": true,
    "ifa.linter.strict": false
}</code></pre>

    <h3>Neovim (LSP)</h3>
    <pre><code>-- In your LSP config
require('lspconfig').ifa_babalawo.setup{
    cmd = { "ifa", "lsp" },
    filetypes = { "ifa" }
}</code></pre>

    <h2>Programmatic API</h2>
    <pre><code>// Rust usage (from ifa-babalawo crate)
use ifa_babalawo::{check_program, BabalawoConfig};
use ifa_core::parser::parse;

let source = "ayanmo x = 10";
let ast = parse(source)?;
let baba = check_program(&ast, "test.ifa");

for diag in baba.diagnostics() {
    println!("{}: {}", diag.severity, diag.message);
}</code></pre>

    <footer class="doc-footer">
        <p><a href="../tools/cli.html">CLI Reference</a> · <a href="../api/api.html">API Reference</a></p>
        <p><a href="../index.html">? Documentation Home</a></p>
    </footer>
</div>
<script src="../js/nav.js"></script>
<script src="../js/common.js"></script>
</body>

</html>