<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Okanran Use Cases - Error Handling Examples</title>
    <style>
        :root {
            --bg-dark: #0f0f1a;
            --bg-card: #1a1a2e;
            --accent: #e94560;
            --gold: #ffd700;
            --text: #eaeaea;
            --text-dim: #a0a0a0;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.7;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        h1 {
            color: var(--gold);
            font-size: 2.5rem;
        }

        h2 {
            color: var(--gold);
            margin: 2.5rem 0 1rem;
            border-bottom: 1px solid var(--accent);
            padding-bottom: 0.5rem;
        }

        p {
            margin: 1rem 0;
        }

        pre {
            background: #0d1321;
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            color: var(--gold);
        }

        a {
            color: var(--gold);
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-dim);
            border-top: 1px solid var(--accent);
            margin-top: 3rem;
        }
    </style>
</head>


    <!-- Breadcrumbs -->
    <div class="breadcrumbs">
        <div class="breadcrumbs-container">
            <ul class="breadcrumb-list">
                <!-- Breadcrumbs will be generated by JavaScript -->
            </ul>
        </div>
    </div>
    <div class="container">
        <h1>?? Okanran: Error Handling</h1>
        <p>Resilient code with proper error handling.</p>

        <h2>Use Case 1: Retry with Exponential Backoff</h2>
        <pre><code>// retry.ifa - Retry failed operations with backoff

ise retry_with_backoff(operation, max_retries, initial_delay) {
    ayanmo attempt = 0;
    ayanmo delay = initial_delay;
    
    nigba (attempt < max_retries) {
        ayanmo result = Okanran.try(operation);
        
        ti (!Okanran.is_error(result)) {
            padap? result;  // Success!
        }
        
        ayanmo attempt = attempt + 1;
        
        ti (attempt < max_retries) {
            Irosu.fo("Attempt " + attempt + " failed, retrying in " + delay + "ms...");
            Oyeku.sleep(delay);
            ayanmo delay = delay * 2;  // Exponential backoff
        }
    }
    
    padap? Okanran.error("Max retries exceeded");
}

// Usage
ayanmo fetch_data = || {
    ayanmo response = Otura.get("https://api.example.com/data");
    ti (response["status"] != 200) {
        padap? Okanran.error("HTTP " + response["status"]);
    }
    padap? response["body"];
};

ayanmo result = retry_with_backoff(fetch_data, 3, 1000);

ti (Okanran.is_error(result)) {
    Irosu.kigbe("Failed after retries: " + Okanran.message(result));
} bib?k? {
    Irosu.fo("Success: " + result);
}</code></pre>

        <h2>Use Case 2: Input Validation</h2>
        <pre><code>// validation.ifa - Form validation with detailed errors

ise validate_email(email) {
    ti (Ika.len(email) == 0) {
        padap? Okanran.error("Email is required");
    }
    ti (!Ika.contains(email, "@")) {
        padap? Okanran.error("Email must contain @");
    }
    ti (!Ika.contains(email, ".")) {
        padap? Okanran.error("Email must contain domain");
    }
    padap? email;
}

ise validate_age(age) {
    ti (age == nil) {
        padap? Okanran.error("Age is required");
    }
    ti (Ogbe.type(age) != "number") {
        padap? Okanran.error("Age must be a number");
    }
    ti (age < 0 || age > 150) {
        padap? Okanran.error("Age must be between 0 and 150");
    }
    padap? age;
}

ise validate_user(data) {
    ayanmo errors = [];
    
    ayanmo email = validate_email(data["email"]);
    ti (Okanran.is_error(email)) {
        ayanmo errors = Ogunda.push(errors, {"field": "email", "message": Okanran.message(email)});
    }
    
    ayanmo age = validate_age(data["age"]);
    ti (Okanran.is_error(age)) {
        ayanmo errors = Ogunda.push(errors, {"field": "age", "message": Okanran.message(age)});
    }
    
    ti (Ogunda.len(errors) > 0) {
        padap? {"valid": iro, "errors": errors};
    }
    
    padap? {"valid": otito, "data": data};
}

// Usage
ayanmo input = {"email": "invalid", "age": -5};
ayanmo result = validate_user(input);

ti (!result["valid"]) {
    Irosu.fo("Validation failed:");
    fun err ninu result["errors"] {
        Irosu.fo("  " + err["field"] + ": " + err["message"]);
    }
} bib?k? {
    Irosu.fo("User is valid!");
}</code></pre>

        <h2>Use Case 3: Safe File Operations</h2>
        <pre><code>// safe_files.ifa - File operations with error handling

ise safe_read(path) {
    ti (!Odi.exists(path)) {
        padap? Okanran.error("File not found: " + path);
    }
    
    ayanmo result = Okanran.try(|| {
        padap? Odi.read(path);
    });
    
    ti (Okanran.is_error(result)) {
        padap? Okanran.error("Read failed: " + Okanran.message(result));
    }
    
    padap? result;
}

ise safe_write(path, content) {
    // Check directory exists
    ayanmo dir = Ika.rsplit(path, "/");
    ayanmo dir_path = Ogunda.first(dir);
    
    ti (Ika.len(dir_path) > 0 && !Odi.exists(dir_path)) {
        ayanmo mkdir_result = Okanran.try(|| {
            Odi.mkdir(dir_path);
        });
        
        ti (Okanran.is_error(mkdir_result)) {
            padap? Okanran.error("Cannot create directory: " + dir_path);
        }
    }
    
    ayanmo result = Okanran.try(|| {
        Odi.write(path, content);
    });
    
    ti (Okanran.is_error(result)) {
        padap? Okanran.error("Write failed: " + Okanran.message(result));
    }
    
    padap? otito;
}

ise safe_json_read(path) {
    ayanmo content = safe_read(path);
    ti (Okanran.is_error(content)) {
        padap? content;
    }
    
    ayanmo result = Okanran.try(|| {
        padap? Ogbe.parse_json(content);
    });
    
    ti (Okanran.is_error(result)) {
        padap? Okanran.error("Invalid JSON in " + path);
    }
    
    padap? result;
}

// Usage
ayanmo config = safe_json_read("config.json");
ti (Okanran.is_error(config)) {
    Irosu.fo("Using default config: " + Okanran.message(config));
    ayanmo config = {"default": otito};
} bib?k? {
    Irosu.fo("Config loaded successfully");
}</code></pre>

        <h2>Use Case 4: Result Chain (Railway Pattern)</h2>
        <pre><code>// railway.ifa - Chain operations that can fail

ise chain(value, operations) {
    ayanmo current = value;
    
    fun op ninu operations {
        ti (Okanran.is_error(current)) {
            padap? current;  // Short-circuit on error
        }
        ayanmo current = op(current);
    }
    
    padap? current;
}

// Processing pipeline
ise parse_user_input(input) {
    ti (input == nil || Ika.len(input) == 0) {
        padap? Okanran.error("Empty input");
    }
    padap? Ika.trim(input);
}

ise validate_format(data) {
    ti (!Ika.contains(data, ":")) {
        padap? Okanran.error("Invalid format, expected 'key:value'");
    }
    padap? Ika.split(data, ":");
}

ise transform_data(parts) {
    ti (Ogunda.len(parts) != 2) {
        padap? Okanran.error("Expected exactly 2 parts");
    }
    padap? {
        "key": Ogunda.first(parts),
        "value": Ogunda.last(parts)
    };
}

// Usage
ayanmo inputs = ["name:John", "invalid", "  age:25  ", ""];

fun input ninu inputs {
    ayanmo result = chain(input, [
        parse_user_input,
        validate_format,
        transform_data
    ]);
    
    Irosu.fo("Input: '" + input + "'");
    ti (Okanran.is_error(result)) {
        Irosu.fo("  ? " + Okanran.message(result));
    } bib?k? {
        Irosu.fo("  ? " + result["key"] + " = " + result["value"]);
    }
}</code></pre>

        <footer class="doc-footer">
            <p><a href="domains.html">? All Domain Use Cases</a></p>
            <p><a href="../../index.html">Documentation Home</a></p>
        </footer>
    </div>
    <script src="../../js/nav.js"></script>
    <script src="../../js/common.js"></script>
</body>

</html>

