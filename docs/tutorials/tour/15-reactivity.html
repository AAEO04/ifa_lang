<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 15: Reactivity - Tour of Ifá</title>
    <style>
        :root {
            --bg-dark: #0f0f1a;
            --bg-card: #1a1a2e;
            --accent: #e94560;
            --gold: #ffd700;
            --text: #eaeaea;
            --text-dim: #a0a0a0;
            --success: #4ade80;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.7;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .lesson-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--accent);
        }

        .lesson-num {
            background: var(--accent);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        h1 {
            color: var(--gold);
            font-size: 2rem;
        }

        h2 {
            color: var(--gold);
            margin: 2rem 0 1rem;
            border-bottom: 1px solid var(--accent);
            padding-bottom: 0.5rem;
        }

        h3 {
            color: var(--accent);
            margin: 1.5rem 0 0.5rem;
        }

        p {
            margin: 1rem 0;
        }

        pre {
            background: #0d1321;
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            color: var(--gold);
        }

        .concept-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }

        .concept {
            background: var(--bg-card);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .concept h4 {
            color: var(--gold);
            margin-bottom: 0.5rem;
        }

        .concept p {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin: 0;
        }

        .congrats {
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.1), rgba(233, 69, 96, 0.1));
            border: 2px solid var(--success);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            margin: 2rem 0;
        }

        .congrats h3 {
            color: var(--success);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--accent);
        }

        .nav-btn {
            background: var(--bg-card);
            color: var(--gold);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            border: 1px solid var(--accent);
        }

        .nav-btn:hover {
            background: var(--accent);
            color: white;
        }

        .nav-btn.primary {
            background: var(--accent);
            color: white;
        }

        a {
            color: var(--gold);
        }
    </style>
</head>


    <!-- Breadcrumbs -->
    <div class="breadcrumbs">
        <div class="breadcrumbs-container">
            <ul class="breadcrumb-list">
                <!-- Breadcrumbs will be generated by JavaScript -->
            </ul>
        </div>
    </div>
    <div class="container">
        <div class="lesson-header">
            <div class="lesson-num">15</div>
            <div>
                <h1>Reactivity</h1>
                <p style="color: var(--text-dim); margin: 0;">Signals and effects with Àj??e</p>
            </div>
        </div>

        <h2>What is Àj??e?</h2>
        <p><strong>Àj??e</strong> (Yoruba: "relationship") is Ifá-Lang's reactive programming system. Values
            automatically update when their dependencies change.</p>

        <div class="concept-grid">
            <div class="concept">
                <h4>?? Signal</h4>
                <p>Reactive primitive that holds a value</p>
            </div>
            <div class="concept">
                <h4>?? Computed</h4>
                <p>Derived value that auto-updates</p>
            </div>
            <div class="concept">
                <h4>? Effect</h4>
                <p>Side-effect that runs on changes</p>
            </div>
        </div>

        <h2>Signals</h2>
        <p>A Signal is a reactive container for a value:</p>

        <pre><code>// Create a signal with initial value
ayanmo count = Signal.new(0);

// Read the value
Irosu.fo(count.get());  // 0

// Update the value
count.set(5);
Irosu.fo(count.get());  // 5

// Update based on current value
count.update(|n| n + 1);
Irosu.fo(count.get());  // 6</code></pre>

        <h2>Computed Values</h2>
        <p>Computed values derive from signals and auto-update:</p>

        <pre><code>ayanmo price = Signal.new(100);
ayanmo quantity = Signal.new(3);

// Computed: automatically recalculates
ayanmo total = Computed.from(|| {
    padap? price.get() * quantity.get();
});

Irosu.fo(total.get());  // 300

// Change a dependency
quantity.set(5);
Irosu.fo(total.get());  // 500 (auto-updated!)</code></pre>

        <h2>Effects</h2>
        <p>Effects run side-effects when dependencies change:</p>

        <pre><code>ayanmo name = Signal.new("Ifá");

// Effect: runs when 'name' changes
Effect.create(|| {
    Irosu.fo("Name changed to: " + name.get());
});

// Output: "Name changed to: Ifá" (runs immediately)

name.set("Orunmila");
// Output: "Name changed to: Orunmila" (runs again)</code></pre>

        <h2>Subscriptions</h2>
        <pre><code>ayanmo temperature = Signal.new(20);

// Subscribe to changes
temperature.subscribe(|new_val| {
    ti (new_val > 30) {
        Irosu.fo("?? High temperature: " + new_val);
    }
});

temperature.set(25);  // (no output, < 30)
temperature.set(35);  // "?? High temperature: 35"</code></pre>

        <h2>Batching Updates</h2>
        <p>Group multiple updates to trigger effects once:</p>

        <pre><code>ayanmo a = Signal.new(1);
ayanmo b = Signal.new(2);

Effect.create(|| {
    Irosu.fo("Sum: " + (a.get() + b.get()));
});

// Without batch: effect runs twice
a.set(10);  // "Sum: 12"
b.set(20);  // "Sum: 30"

// With batch: effect runs once
batch(|| {
    a.set(100);
    b.set(200);
});  // "Sum: 300" (only once)</code></pre>

        <h2>Practical Example: Form Validation</h2>
        <pre><code>ayanmo username = Signal.new("");
ayanmo password = Signal.new("");

// Computed validation
ayanmo is_valid = Computed.from(|| {
    ayanmo u = username.get();
    ayanmo p = password.get();
    
    padap? Ika.len(u) >= 3 && Ika.len(p) >= 8;
});

// Effect: update UI on validation change
Effect.create(|| {
    ti (is_valid.get()) {
        Irosu.fo("? Form is valid");
    } bib?k? {
        Irosu.fo("? Form is invalid");
    }
});

username.set("adé");     // "? Form is invalid"
password.set("password123");  // "? Form is valid"</code></pre>

        <div class="congrats">
            <h3>?? Congratulations!</h3>
            <p>You've completed the Tour of Ifá! You now understand:</p>
            <ul style="text-align: left; margin: 1rem auto; max-width: 400px; color: var(--text-dim);">
                <li>Variables, types, operators, control flow</li>
                <li>Functions and the 16 Odù domains</li>
                <li>Lists, strings, files, error handling</li>
                <li>Parallel processing and cryptography</li>
                <li>Resource management and reactivity</li>
            </ul>
        </div>

        <h2>What's Next?</h2>
        <ul style="margin-left: 2rem; color: var(--text-dim);">
            <li><a href="../../../index.html">Build real projects</a> — REST APIs, CLI tools, games</li>
            <li><a href="../../../api/api.html">Explore the API</a> — All domain methods</li>
            <li><a href="../../../index.html">Learn stacks</a> — Crypto, ML, GameDev</li>
            <li><a href="../../../tutorials/index.html">Practice in playground</a> — Try examples</li>
        </ul>

        <div class="nav-buttons">
            <a href="14-ebo.html" class="nav-btn">? Previous: Resource Management</a>
            <a href="../../../index.html" class="nav-btn primary">Tour Index</a>
        </div>
    </div>
        <script src="../../../js/nav.js"></script>
    <script src="../../../js/common.js"></script>
</body>

</html>

