<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debugging Tutorial - Ifá-Lang</title>
    <style>
        :root {
            --bg-dark: #0f0f1a;
            --bg-card: #1a1a2e;
            --accent: #e94560;
            --gold: #ffd700;
            --text: #eaeaea;
            --text-dim: #a0a0a0;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.7;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        h1 {
            color: var(--gold);
            font-size: 2.5rem;
        }

        h2 {
            color: var(--gold);
            margin: 2.5rem 0 1rem;
            border-bottom: 1px solid var(--accent);
            padding-bottom: 0.5rem;
        }

        h3 {
            color: var(--accent);
            margin: 1.5rem 0 0.5rem;
        }

        p {
            margin: 1rem 0;
        }

        pre {
            background: #0d1321;
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            color: var(--gold);
        }

        a {
            color: var(--gold);
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-dim);
            border-top: 1px solid var(--accent);
            margin-top: 3rem;
        }
    </style>
</head>


    <!-- Breadcrumbs -->
    <div class="breadcrumbs">
        <div class="breadcrumbs-container">
            <ul class="breadcrumb-list">
                <!-- Breadcrumbs will be generated by JavaScript -->
            </ul>
        </div>
    </div>
    <div class="container">
        <h1>?? Debugging Tutorial</h1>
        <p>Learn how to find and fix bugs using Babalawo and debugging tools.</p>

        <h2>Static Analysis with Babalawo</h2>
        <p>Catch errors before running your code:</p>
        <pre><code># Run Babalawo linter
ifa check main.ifa

# Example output:
# main.ifa:15:5 WARNING: Unused variable 'temp'
#   ? Ogbè wisdom: "A journey begins with a single step."
#
# main.ifa:23:10 ERROR: Undefined variable 'result'
#   ? Check your variable declarations.</code></pre>

        <h2>Print Debugging</h2>
        <p>Use <code>Irosu</code> for debug output:</p>
        <pre><code>ise process_data(data) {
    Irosu.fo("[DEBUG] Input: " + Ogbe.format_json(data));
    
    ayanmo result = transform(data);
    Irosu.fo("[DEBUG] After transform: " + Ogbe.format_json(result));
    
    // Use kigbe for errors (writes to stderr)
    ti (result == nil) {
        Irosu.kigbe("[ERROR] Transform returned nil!");
    }
    
    padap? result;
}</code></pre>

        <h2>Tracing Execution</h2>
        <p>Track function calls and timing:</p>
        <pre><code>ise trace(name, func) {
    ayanmo start = Iwori.now_ms();
    Irosu.fo("[TRACE] ? Entering " + name);
    
    ayanmo result = func();
    
    ayanmo elapsed = Iwori.now_ms() - start;
    Irosu.fo("[TRACE] ? Exiting " + name + " (" + elapsed + "ms)");
    
    padap? result;
}

// Usage
ayanmo result = trace("processOrder", || {
    ayanmo order = fetch_order(id);
    ayanmo validated = trace("validateOrder", || validate(order));
    padap? trace("saveOrder", || save(validated));
});</code></pre>

        <h2>Error Context</h2>
        <p>Wrap errors with context:</p>
        <pre><code>ise fetch_user(id) {
    ayanmo result = Okanran.try(|| {
        ayanmo response = Otura.get("/api/users/" + id);
        ti (response["status"] != 200) {
            padap? Okanran.error("HTTP " + response["status"]);
        }
        padap? Ogbe.parse_json(response["body"]);
    });
    
    // Add context to error
    ti (Okanran.is_error(result)) {
        padap? Okanran.error("Failed to fetch user " + id + ": " + Okanran.message(result));
    }
    
    padap? result;
}</code></pre>

        <h2>Debugging Common Issues</h2>

        <h3>Undefined Variable</h3>
        <pre><code>// Problem:
ayanmo x = 10;
Irosu.fo(y);  // ERROR: Undefined variable 'y'

// Fix: Check spelling, ensure variable is declared before use
ayanmo x = 10;
Irosu.fo(x);  // ?</code></pre>

        <h3>Type Mismatch</h3>
        <pre><code>// Problem:
ayanmo count = "5";
ayanmo total = count + 10;  // "510" (string concat, not addition!)

// Fix: Use Ogbe for type conversion
ayanmo count = Ogbe.parse_int("5");
ayanmo total = count + 10;  // 15 ?</code></pre>

        <h3>Off-by-One Errors</h3>
        <pre><code>// Problem:
ayanmo items = [1, 2, 3];
fun i ninu [0, 1, 2, 3] {  // Index 3 doesn't exist!
    Irosu.fo(Ogunda.get(items, i));
}

// Fix: Use proper bounds
fun i ninu Obara.range(0, Ogunda.len(items)) {
    Irosu.fo(Ogunda.get(items, i));
}</code></pre>

        <h2>REPL for Interactive Debugging</h2>
        <pre><code># Start REPL
ifa repl

# Test expressions interactively
>>> ayanmo data = [1, 2, 3, 4, 5]
>>> Ogunda.filter(data, |x| x > 3)
[4, 5]
>>> Osa.sum(data)
15</code></pre>

        <h2>Babalawo Diagnostic Levels</h2>
        <pre><code>// Severity levels:
// - Error: Code will not run correctly
// - Warning: Potential issue, code may work
// - Info: Suggestion for improvement
// - Hint: Style recommendation

# Run with all levels
ifa check --verbose main.ifa

# Suppress warnings
ifa check --no-warnings main.ifa</code></pre>

        <footer class="doc-footer">
            <p><a href="testing.html">? Testing</a> · <a href="performance.html">Performance ?</a></p>
            <p><a href="../index.html">Documentation Home</a></p>
        </footer>
    </div>
    <script src="../js/nav.js"></script>
    <script src="../js/common.js"></script>
</body>

</html>

