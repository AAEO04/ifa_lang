<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployment Targets - If·-Lang</title>
    <style>
        :root {
            --bg-dark: #0f0f1a;
            --bg-card: #1a1a2e;
            --accent: #e94560;
            --gold: #ffd700;
            --text: #eaeaea;
            --text-dim: #a0a0a0;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.7;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            padding: 3rem 0;
            border-bottom: 2px solid var(--accent);
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--gold), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h2 {
            color: var(--gold);
            margin: 2.5rem 0 1rem;
            border-bottom: 1px solid var(--accent);
            padding-bottom: 0.5rem;
        }

        h3 {
            color: var(--accent);
            margin: 1.5rem 0 0.5rem;
        }

        p {
            margin: 1rem 0;
        }

        pre {
            background: #0d1321;
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            color: var(--gold);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th,
        td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--bg-card);
        }

        th {
            color: var(--gold);
        }

        a {
            color: var(--gold);
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-dim);
            border-top: 1px solid var(--accent);
            margin-top: 3rem;
        }
    </style>
</head>


    <!-- Breadcrumbs -->
    <div class="breadcrumbs">
        <div class="breadcrumbs-container">
            <ul class="breadcrumb-list">
                <!-- Breadcrumbs will be generated by JavaScript -->
            </ul>
        </div>
    </div>
    <div class="container">
        <header>
            <h1>?? Deployment Targets</h1>
            <p style="color: var(--text-dim);">Deploy If·-Lang to any platform</p>
        </header>

        <h2>Build Targets</h2>
        <table>
            <tr>
                <th>Flag</th>
                <th>Target</th>
                <th>Output</th>
            </tr>
            <tr>
                <td><code>--backend</code></td>
                <td>Server applications</td>
                <td>Native binary</td>
            </tr>
            <tr>
                <td><code>--frontend</code></td>
                <td>Browser (WASM)</td>
                <td>.wasm + .js</td>
            </tr>
            <tr>
                <td><code>--fullstack</code></td>
                <td>Backend + Frontend</td>
                <td>Hybrid bundle</td>
            </tr>
            <tr>
                <td><code>--game</code></td>
                <td>Game development</td>
                <td>Native with GPU</td>
            </tr>
            <tr>
                <td><code>--iot</code></td>
                <td>Embedded devices</td>
                <td>no_std binary</td>
            </tr>
            <tr>
                <td><code>--ml</code></td>
                <td>Machine learning</td>
                <td>Python interop + GPU</td>
            </tr>
            <tr>
                <td><code>--crypto</code></td>
                <td>Security-critical</td>
                <td>Constant-time binary</td>
            </tr>
        </table>

        <h2>Native Binary</h2>
        <pre><code># Default backend build
ifa build myapp.ifa

# Cross-compile for platforms
ifa build --target x86_64-unknown-linux-gnu myapp.ifa
ifa build --target x86_64-pc-windows-msvc myapp.ifa
ifa build --target aarch64-apple-darwin myapp.ifa
ifa build --target x86_64-unknown-linux-musl myapp.ifa  # Static binary</code></pre>

        <h3>Supported Targets</h3>
        <table>
            <tr>
                <th>Platform</th>
                <th>Target Triple</th>
            </tr>
            <tr>
                <td>Linux (x64)</td>
                <td><code>x86_64-unknown-linux-gnu</code></td>
            </tr>
            <tr>
                <td>Linux (ARM64)</td>
                <td><code>aarch64-unknown-linux-gnu</code></td>
            </tr>
            <tr>
                <td>Linux (static)</td>
                <td><code>x86_64-unknown-linux-musl</code></td>
            </tr>
            <tr>
                <td>Windows (x64)</td>
                <td><code>x86_64-pc-windows-msvc</code></td>
            </tr>
            <tr>
                <td>macOS (Intel)</td>
                <td><code>x86_64-apple-darwin</code></td>
            </tr>
            <tr>
                <td>macOS (Apple Silicon)</td>
                <td><code>aarch64-apple-darwin</code></td>
            </tr>
        </table>

        <h2>WebAssembly (Frontend)</h2>
        <pre><code># Build for browser
ifa build --frontend myapp.ifa

# Output:
# - myapp.wasm
# - myapp.js (glue code)
# - myapp.d.ts (TypeScript types)

# Serve locally
python -m http.server 8000</code></pre>

        <h3>Usage in HTML</h3>
        <pre><code>&lt;script type="module"&gt;
    import init, { run } from './myapp.js';
    
    async function main() {
        await init();
        run();
    }
    main();
&lt;/script&gt;</code></pre>

        <h2>Embedded / IoT</h2>
        <pre><code># Build for embedded
ifa build --iot myapp.ifa --target thumbv7em-none-eabihf

# Flash to device
ifa flash --target esp32 --port COM3 myapp.ifa
ifa flash --target stm32f4 --port /dev/ttyUSB0 myapp.ifa</code></pre>

        <h3>Supported Devices</h3>
        <table>
            <tr>
                <th>Device</th>
                <th>Target</th>
            </tr>
            <tr>
                <td>ESP32</td>
                <td><code>esp32</code></td>
            </tr>
            <tr>
                <td>STM32F4</td>
                <td><code>stm32f4</code></td>
            </tr>
            <tr>
                <td>Raspberry Pi Pico</td>
                <td><code>rp2040</code></td>
            </tr>
            <tr>
                <td>Arduino (AVR)</td>
                <td><code>avr-atmega328p</code></td>
            </tr>
        </table>

        <h2>Fullstack Hybrid</h2>
        <pre><code># Build server + client bundle
ifa build --fullstack myapp.ifa

# Deploy to container
docker build -t myapp .
docker run -p 8080:8080 myapp</code></pre>

        <h2>Zero-Config Deployment</h2>
        <pre><code># Auto-detect project type and deploy target
ifa deploy

# Analyzes:
# - oja.toml dependencies
# - Stack usage (Backend, Frontend, etc.)
# - Resource requirements
# - Suggests optimal deployment strategy</code></pre>

        <h2>Bytecode Distribution</h2>
        <pre><code># Compile to bytecode (platform-independent)
ifa bytecode myapp.ifa -o myapp.ifab

# Run bytecode on any platform with ifa installed
ifa runb myapp.ifab</code></pre>

        <h2>Platform-Specific Notes</h2>

        <h3>Windows</h3>
        <ul style="margin-left: 1.5rem;">
            <li>Binaries are automatically named <code>.exe</code></li>
            <li>PowerShell/CMD compatible scripts</li>
            <li>Windows Defender may flag new binaries (click Allow)</li>
        </ul>

        <h3>macOS</h3>
        <ul style="margin-left: 1.5rem;">
            <li>Unsigned binaries need approval (Settings ‚Üí Security)</li>
            <li>Or: <code>xattr -cr ./myapp</code> to remove quarantine</li>
            <li>Universal binaries: <code>lipo</code> to combine Intel + ARM</li>
        </ul>

        <h3>Linux</h3>
        <ul style="margin-left: 1.5rem;">
            <li>Set executable: <code>chmod +x myapp</code></li>
            <li>Static builds (<code>-musl</code>) have no libc dependency</li>
            <li>AppImage/Flatpak packaging via standard tools</li>
        </ul>

        <footer class="doc-footer">
            <p><a href="../examples/use-cases/cloud.html">‚Üê Cloud Deployment</a> ¬∑ <a href="../deployment/deployment.html">Embedded ‚Üí</a></p>
            <p><a href="../index.html">Documentation Home</a></p>
        </footer>
    </div>
    <script src="../js/nav.js"></script>
    <script src="../js/common.js"></script>
</body>

</html>

